import{u as K,i as X,r as s,c as Z,j as e,L as ee}from"./index-B4bz0GvT.js";/* empty css             */import{C as ae}from"./react-confetti.min-BUK6BsUL.js";import{G as se,T as te}from"./GameScore-BsyvPK8C.js";import{P as z,a as re}from"./PongTable-DlUdo7P5.js";const ne=()=>e.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-600/90 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-pulse",children:[e.jsx("span",{className:"font-bold",children:"SUDDEN DEATH!"}),e.jsx("span",{className:"ml-2",children:"First PLayer To Score Wins !!"})]}),oe=({winner:i,onQuit:y,onProceed:v})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-10"}),e.jsxs("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20
			flex flex-col justify-center items-center gameoverpopup`,children:[i?e.jsx("h1",{className:"font-dreamscape",children:"VICTORY ACHIEVED"}):e.jsx("h1",{className:"font-dreamscape",children:"GAME OVER"}),i?e.jsxs("div",{className:"font-heavy mb-20",children:[e.jsx("p",{className:"text-left text-2xl",children:"Cosmic Champion:"}),e.jsx("h3",{className:"players-usernames font-dreamscape-sans pt-3 pb-7 text-center glow drop-shadow-[0_2px_10px_rgba(255,206,158,0.5)]",children:i.name}),e.jsx("p",{className:"text-lg text-center",children:"Your stellar skills have conquered the arena!"})]}):e.jsx("p",{className:"text-2xl font-medium mb-20",children:"A cosmic deadlock! The match ends in a tie."}),e.jsxs("div",{className:"w-full flex justify-between my-10 lg:gap-10 gap-6",children:[e.jsx("button",{onClick:y,className:`font-dreamscape bg-primary text-secondary py-3 flex-1 rounded
					hover:scale-[1.03] hover:brightness-100 transition-all duration-300 ease-in-out`,children:"Quit The Tournament"}),e.jsx("button",{onClick:v,className:`font-heavy text-primary py-3 border border-border rounded flex-1
					bg-[rgb(183,170,156,12%)] transition-all duration-300 ease-in-out hover:bg-[rgb(183,170,156,30%)]`,children:"Proceed To The Next Round"})]})]})]}),pe=()=>{const i=K(),{setSemiFinal1winner:y,setSemiFinal2winner:v,setFinalWinner:L,setTournamentState:N,resetTournament:W,setTournamentData:A,tournamentScores:le,setTournamentScores:R}=X(),[c,P]=s.useState(!1),[o,T]=s.useState(!1),[f,I]=s.useState(!1),[d,w]=s.useState(0),[m,C]=s.useState(0),[M,ie]=s.useState(!1),[G,V]=s.useState(null),_=Z(),{mode:u,player1:r,player2:n,ballColor:x,duration:p,backgroundId:h,paddleSize:g,ballSize:b,tournamentRound:l}=_.state||{};if(s.useEffect(()=>{(!u||!r||!n||!x||!h||!g||!b||!p||!l)&&(console.log("Redirecting to dashboard..."),i("/dashboard",{replace:!0}))},[u,r,n,x,p,h,g,b,i,l]),!u||!r||!n||!x||!h||!g||!b||!p||!l)return e.jsx(ee,{});const[j,k]=s.useState(p||60),[q,D]=s.useState(!1),[B,ce]=s.useState(!1),[S,F]=s.useState(null),H=()=>{f||T(!o)},Q=a=>{if(c){const t=a===1?r:n;F(t),a===1?w(E=>E+1):a===2&&C(E=>E+1),O(t);return}a===2?C(t=>t+1):a===1&&w(t=>t+1)};s.useEffect(()=>{if(!(o||f))if(j>0){const a=setInterval(()=>{k(t=>t-1)},1e3);return()=>clearInterval(a)}else j===0&&J()},[j,o,f]);const Y=()=>d>m?r:m>d?n:l?c&&S?S:(P(!0),I(!1),k(30),null):null,U=()=>{D(!1),R(a=>({...a,[l]:{player1Score:d,player2Score:m}})),i("/Tournament",{replace:!0})},$=()=>{R(a=>({...a,[l]:{player1Score:d,player2Score:m}})),W(),A(null),i("/dashboard")},J=()=>{const a=Y();if(!a&&l){P(!0),k(30),I(!1),T(!1),F(null);return}c&&S&&(S===r?w(t=>t+1):C(t=>t+1)),O(a)},O=a=>{if(I(!0),T(!1),D(!0),V(a),P(!1),!!l)switch(l){case"semifinal1":y(a),N("semifinal2");break;case"semifinal2":v(a),N("final");break;case"final":L(a),N("completed");break}};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:`relative flex-1 margin-page flex flex-col items-center gap-8 ${o?"bg-backdrop-40":""}`,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(se,{player1Score:d,player2Score:m,isPaused:o}),e.jsx(te,{isPaused:o,timeRemaining:j,isSuddenDeath:c}),c&&e.jsx(ne,{})]}),e.jsxs("div",{className:"relative w-full flex justify-center font-dreamscape-sans",children:[e.jsx(z,{id:1,isPaused:o,PlayerName:r.name,BadgeName:r.badge,playerImage:r.image,badgeImage:r.badgeImage,GameMode:u}),e.jsx(z,{id:2,isPaused:o,PlayerName:n.name,BadgeName:n.badge,playerImage:n.image,badgeImage:n.badgeImage,GameMode:u}),e.jsx(re,{isPaused:o,handlePause:H,backgroundId:h,updateScore:Q,isGameOver:f,resetParameters:B,player1Color:r.color,player2Color:n.color,ballColor:x,paddleSize:g,ballSize:b})]}),q&&e.jsx(oe,{winner:G,onQuit:$,onProceed:U}),G&&M&&e.jsx(ae,{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:20},recycle:!1,numberOfPieces:500})]})})};export{pe as default};
