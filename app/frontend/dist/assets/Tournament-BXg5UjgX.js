import{r as x,j as e,u as M,c as P,i as _,L as O}from"./index-B4bz0GvT.js";import{C as B}from"./react-confetti.min-BUK6BsUL.js";import{B as H}from"./Button-DzeJS1SW.js";const D=({player1Name:d,player2Name:m})=>{const[t,f]=x.useState(3);return x.useEffect(()=>{const s=setTimeout(()=>{t>0&&f(T=>T-1)},1e3);return()=>{clearTimeout(s)}},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-10"}),e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-primary z-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center animate-bounce",children:[e.jsxs("h3",{className:"font-heavy text-2xl mb-5 text-light",children:["Match Starting in ",t,"..."]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center text-lg",children:[e.jsx("span",{className:"font-medium",children:d}),e.jsx("span",{className:"font-dreamscape text-light",children:"vs"}),e.jsx("span",{className:"font-medium",children:m})]})]})})]})},U=({winner:d})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-20",children:e.jsxs("div",{className:"bg-gradient-to-b from-yellow-500 to-orange-600 p-8 rounded-xl text-center max-w-2xl mx-4 border-2 border-yellow-300 animate-bounce",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-dreamscape text-white mb-4",children:"TOURNAMENT CHAMPION"}),e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsx("div",{className:"relative w-32 h-32 rounded-full border-4 border-yellow-300 shadow-lg",style:{background:"url(/assets/images/avatar.jpg)",backgroundSize:"cover"},children:e.jsx("img",{src:"/assets/images/tournament-winner-badge.png",className:"absolute -bottom-2 -right-2 w-1/2",alt:"winner badge"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-3xl font-dreamscape-sans text-white mb-2",children:d==null?void 0:d.name}),e.jsx("p",{className:"text-level text-lg",children:"CELESTIAL MASTER"})]})]})]}),e.jsxs("div",{className:"space-y-2 animate-pulse",children:[e.jsx("p",{className:"text-white text-xl font-dreamscape-sans",children:"CELESTIAL MASTER OF THE TOURNAMENT"}),e.jsx("p",{className:"text-yellow-200",children:"Victory achieved in glorious combat!"})]})]})}),K=()=>{const d=M(),m=P(),{semiFinal1winner:t,setSemiFinal1winner:f,semiFinal2winner:s,setSemiFinal2winner:T,finalWinner:a,setFinalWinner:V,tournamentState:n,setTournamentState:$,tournamentData:p,setTournamentData:h,resetTournament:k,tournamentScores:i}=_(),[E,C]=x.useState(!1),{mode:b,player1:o,player2:r,player3:l,player4:c,backgroundId:g,duration:j,ballSize:y,ballColor:N,paddleSize:v}=p||{},[L,u]=x.useState(!1),R=()=>{u(!0),setTimeout(()=>{u(!1),d("/local-game-tour",{state:{mode:b,player1:o,player2:r,backgroundId:g,duration:j,ballSize:y,ballColor:N,paddleSize:v,tournamentRound:"semifinal1"}}),$("semifinal1")},3e3)},A=()=>{u(!0),setTimeout(()=>{u(!1),d("/local-game-tour",{state:{mode:b,player1:l,player2:c,backgroundId:g,duration:j,ballSize:y,ballColor:N,paddleSize:v,tournamentRound:"semifinal2"}}),$("semifinal2")},3e3)},z=()=>{!t||!s||(u(!0),setTimeout(()=>{u(!1),d("/local-game-tour",{state:{mode:b,player1:t,player2:s,backgroundId:g,duration:j,ballSize:y,ballColor:N,paddleSize:v,tournamentRound:"final"}})},3e3))};x.useEffect(()=>{a&&n==="completed"&&(C(!0),setTimeout(()=>{C(!1)},5e3))},[a,n]);const w=()=>{switch(n){case"not_started":R();break;case"semifinal1":break;case"semifinal2":A();break;case"final":z();break;case"completed":k(),d("/dashboard");break}},I=()=>{switch(n){case"not_started":return"Start Tournament";case"semifinal1":return"Playing Semifinal 1...";case"semifinal2":return"Start Semifinal 2";case"final":return"Start Final Match";case"completed":return"Tournament Complete";default:return"Start Tournament"}};return x.useEffect(()=>()=>{window.location.pathname.includes("local-game-tour")||(k(),h(null))},[]),x.useEffect(()=>{m.state&&!p?(console.log("Setting tournament data from location state..."),h(m.state)):!m.state&&!p&&n==="not_started"&&(console.log("No tournament data found, navigating to setup..."),d("/CustomTournament"))},[m.state,p,h,d,n]),p?e.jsxs("section",{className:"flex-1 parent tournament self-center w-[96%] max-lp:flex max-lp:flex-col max-lp:gap-10",children:[E&&a&&e.jsxs(e.Fragment,{children:[e.jsx(B,{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:30},recycle:!1,numberOfPieces:500}),e.jsx(U,{winner:a})]}),L&&e.jsx(D,{player1Name:n==="not_started"?o==null?void 0:o.name:n==="semifinal2"?l==null?void 0:l.name:t==null?void 0:t.name,player2Name:n==="not_started"?r==null?void 0:r.name:n==="semifinal2"?c==null?void 0:c.name:s==null?void 0:s.name}),e.jsxs("div",{className:"tournament-description",children:[e.jsx("h1",{className:"font-dreamscape drop-shadow-[0_2px_10px_rgba(251,251,238,0.8)]",children:"CELESTIAL PONG CLASH"}),e.jsx("p",{className:"description text-primary font-regular",children:"The Celestial Pong Clash invites players from across the galaxy to compete in intense interstellar battles, where victory depends on mastering precision and strategy in the vast cosmic realm."})]}),e.jsxs("div",{className:"tournament-history flex flex-col items-center gap-5 max-lp:order-last",children:[e.jsx("h3",{className:"font-dreamscape-sans text-light round shadow",children:"SEMIFINAL"}),e.jsx(S,{player1:o==null?void 0:o.name,player2:r==null?void 0:r.name,score1:i.semifinal1.player1Score,score2:i.semifinal1.player2Score}),e.jsx(S,{player1:l==null?void 0:l.name,player2:c==null?void 0:c.name,score1:i.semifinal2.player1Score,score2:i.semifinal2.player2Score}),e.jsx("h3",{className:"font-dreamscape-sans text-light round shadow",children:"FINAL"}),e.jsx(S,{player1:t==null?void 0:t.name,player2:s==null?void 0:s.name,score1:i.final.player1Score,score2:i.final.player2Score}),e.jsx(H,{className:"rounded font-medium round w-full max-w-[500px] py-3 mb-10 bg-[rgb(183,170,156,8%)] transition duration-200 ease-in hover:bg-[rgb(183,170,156,30%)]",onClick:w,type:"submit",children:I()})]}),e.jsxs("div",{className:"tournament-scheme scheme-parent",children:[e.jsx("div",{className:`player1 flex items-center justify-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${o.color}`},children:o.name}),e.jsx("div",{className:`player2 flex items-center justify-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${r.color}`},children:r.name}),e.jsx("div",{className:`player3 flex items-center justify-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${l.color}`},children:l.name}),e.jsx("div",{className:`player4 flex items-center justify-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${c.color}`},children:c.name}),e.jsxs("div",{className:"match1-part1 flex justify-center",children:[e.jsx("div",{className:"w-1/3",style:{borderLeft:`2px solid ${(t==null?void 0:t.name)===o.name?o.color:"#646464"}`,borderTop:`2px solid ${(t==null?void 0:t.name)===o.name?o.color:"#646464"}`}}),e.jsx("div",{className:"w-1/3",style:{borderRight:`2px solid ${(t==null?void 0:t.name)===r.name?r.color:"#646464"}`,borderTop:`2px solid ${(t==null?void 0:t.name)===r.name?r.color:"#646464"}`}})]}),e.jsxs("div",{className:"match1-part2 flex",children:[e.jsx("div",{className:"flex-1",style:{borderRight:`2px solid ${t?(t==null?void 0:t.name)===o.name?o.color:"none":"#646464"}`}}),e.jsx("div",{className:"flex-1",style:{borderLeft:`2px solid ${(t==null?void 0:t.name)===r.name?r.color:"none"}`}})]}),e.jsxs("div",{className:"match2-part1 flex justify-center",children:[e.jsx("div",{className:"w-1/3",style:{borderLeft:`2px solid ${(s==null?void 0:s.name)===l.name?l.color:"#646464"}`,borderTop:`2px solid ${(s==null?void 0:s.name)===l.name?l.color:"#646464"}`}}),e.jsx("div",{className:"w-1/3",style:{borderRight:`2px solid ${(s==null?void 0:s.name)===c.name?c.color:"#646464"}`,borderTop:`2px solid ${(s==null?void 0:s.name)===c.name?c.color:"#646464"}`}})]}),e.jsxs("div",{className:"match2-part2 flex",children:[e.jsx("div",{className:"flex-1",style:{borderRight:`2px solid ${s?(s==null?void 0:s.name)===l.name?l.color:"none":"#646464"}`}}),e.jsx("div",{className:"flex-1",style:{borderLeft:`2px solid ${(s==null?void 0:s.name)===c.name?c.color:"none"}`}})]}),e.jsx("div",{className:`winner-match1 flex items-center justify-center text-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${t?t.color:"#646464"}`,background:`url(${t?"":"/assets/images/unknown.webp"})`,backgroundSize:"cover",backgroundPosition:"center",filter:`${t?"":"brightness(.6)"}`},children:t?t.name:"unknown"}),e.jsx("div",{className:`winner-match2 flex items-center justify-center text-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans overflow-hidden`,style:{border:`2px solid ${s?s.color:"#646464"}`,background:`url(${s?"":"/assets/images/unknown.webp"})`,backgroundSize:"cover",backgroundPosition:"center",filter:`${s?"":"brightness(.6)"}`},children:s?s.name:"unknown"}),e.jsxs("div",{className:"match3-part1 flex justify-center",children:[e.jsx("div",{className:"w-2/5",style:{borderLeft:`2px solid ${a&&(a==null?void 0:a.name)===(t==null?void 0:t.name)?t==null?void 0:t.color:"#646464"}`,borderTop:`2px solid ${a&&(a==null?void 0:a.name)===(t==null?void 0:t.name)?t==null?void 0:t.color:"#646464"}`}}),e.jsx("div",{className:"w-2/5",style:{borderRight:`2px solid ${a&&(a==null?void 0:a.name)===(s==null?void 0:s.name)?s==null?void 0:s.color:"#646464"}`,borderTop:`2px solid ${a&&(a==null?void 0:a.name)===(s==null?void 0:s.name)?s==null?void 0:s.color:"#646464"}`}})]}),e.jsxs("div",{className:"match3-part2 flex",children:[e.jsx("div",{className:"flex-1",style:{borderRight:`2px solid ${a?(a==null?void 0:a.name)===(t==null?void 0:t.name)?t==null?void 0:t.color:"none":"#646464"}`}}),e.jsx("div",{className:"flex-1",style:{borderLeft:`2px solid ${(a==null?void 0:a.name)===(s==null?void 0:s.name)?s==null?void 0:s.color:"none"}`}})]}),e.jsxs("div",{className:`relative winner flex items-center justify-center text-primary
					bg-border bg-opacity-20 rounded-md min-h-20 font-dreamscape-sans`,style:{border:`2px solid ${a?a.color:"#646464"}`,background:`url(${s?"":"/assets/images/unknown.webp"})`,backgroundSize:"cover",backgroundPosition:"center",filter:`${a?"":"brightness(.6)"}`},children:[a?a.name:"unknown",a&&e.jsxs("div",{className:"flex items-center absolute mtb:-bottom-6 -bottom-2 mtb:-right-8 -right-2 w-1/2",children:[e.jsx("img",{src:"/assets/images/tournament-winner-badge.png",alt:"winner badge"}),e.jsx("p",{className:"font-dreamscape text-light",children:"winner"})]})]})]})]}):e.jsx(O,{})},S=({player1:d,player2:m,score1:t,score2:f})=>e.jsxs("div",{className:"round relative w-full lp:h-20 h-14 bg-border bg-opacity-20 rounded-md flex justify-between items-center leading-none max-w-[500px]",children:[e.jsxs("div",{className:"flex-1 flex justify-around",children:[e.jsx("p",{className:"font-dreamscape-sans",children:d}),e.jsx("p",{className:"font-dreamscape",children:t??"-"})]}),e.jsxs("div",{className:"flex-1 flex justify-around",children:[e.jsx("p",{className:"font-dreamscape",children:f??"-"}),e.jsx("p",{className:"font-dreamscape-sans",children:m})]}),e.jsx("div",{className:"absolute flex items-center w-px rotate-12 h-full bg-border left-1/2 transform -translate-x-1/2",children:e.jsx("p",{className:"vs text-light absolute left-1/2 transform -translate-x-1/2 font-dreamscape -rotate-12 z-10 shadow",children:"VS"})})]});export{K as default};
