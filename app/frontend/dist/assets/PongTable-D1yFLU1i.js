import{j as o,r as s}from"./index-BAIcLLuA.js";function ge(h){const{id:A,isPaused:v,PlayerName:x,playerImage:d,badgeImage:R,BadgeName:k,GameMode:p}=h,a=(u=>u.length>11?u.slice(0,11)+"...":u)(x);return o.jsxs("div",{className:`${A===1?"left-0":"right-0"} max-lg:-bottom-10
			absolute flex flex-col items-center ${v?"brightness-[20%]":"brightness-[1]"}`,children:[p==="remote"&&o.jsx("img",{src:d,className:"rounded-full border-2 border-primary user-photo",alt:"user photo"}),o.jsx("p",{className:"players-usernames text-center",title:x,children:a}),p==="remote"&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:R,className:"achievements-icons hover:scale-[1.2] transition duration-500",alt:"badge"}),o.jsx("p",{className:"text-level badge-name",children:k})]})]})}const me=s.forwardRef(({isPaused:h,handlePause:A,backgroundId:v,updateScore:x,isGameOver:d,resetParameters:R,player1Color:k,player2Color:p,ballColor:w,paddleSize:a,ballSize:u},he)=>{const[Z,ue]=s.useState(400),S=s.useRef(null),O=s.useRef(null),M=s.useRef(null),X=s.useRef(null),N=16,B=5,j=1,z=.18,P=600,U=20,[E,L]=s.useState(200-a/2),[Y,D]=s.useState(200-a/2),[$,fe]=s.useState({width:800,height:400}),b=1200,[y,ee]=s.useState({name:"Player 1",x:B,y:E,width:N,height:a,color:k||"white",score:0,won:!1,isPowerupActive:!1,isAttackActive:!1}),[l,te]=s.useState({name:"Player 2",x:800-N-B,y:Y,width:N,height:a,color:p||"white",score:0,won:!1,isPowerupActive:!1,isAttackActive:!1}),g=s.useRef([{x:400,y:200,radius:u,speed:j,velocityX:5,velocityY:5,color:w||"white"}]),[T,W]=s.useState(!1),[F,H]=s.useState(!1),[_,q]=s.useState(!1),[C,K]=s.useState(!1);return s.useEffect(()=>{g.current=[{x:400,y:200,radius:u,speed:j,velocityX:5,velocityY:5,color:w||"white"}],L(200-a/2),D(200-a/2)},[R,u,w,a]),s.useEffect(()=>{const c=S.current,r=c.getContext("2d"),i=c.width,f=c.height,G=e=>{r.fillStyle=e.color,r.fillRect(e.x,e.y,e.width,e.height),r.beginPath(),r.arc(e.x+e.width/2,e.y,e.width/2,0,Math.PI,!0),r.arc(e.x+e.width/2,e.y+e.height,e.width/2,0,Math.PI,!1),r.closePath(),r.fill()},se=e=>{r.beginPath(),r.arc(e.x,e.y,e.radius,0,Math.PI*2),r.fillStyle=e.color,r.fill(),r.closePath()},ie=()=>{r.clearRect(0,0,i,f),G(y),G(l),g.current.forEach(se)},V=(e,n)=>{const t=n.y,I=n.y+n.height,m=n.x,ne=n.x+n.width,oe=e.y-e.radius,ce=e.y+e.radius,ae=e.x-e.radius;return e.x+e.radius>m&&ae<ne&&ce>t&&oe<I},J=(e,n)=>{e.velocityX=-e.velocityX,n.x<400?e.x=n.x+n.width+e.radius:e.x=n.x-e.radius,e.speed+=z,e.speed>U&&(e.speed=U)},re=()=>{g.current=[{x:i/2,y:f/2,radius:u,speed:j,velocityX:-g.current[0].velocityX,velocityY:g.current[0].velocityY,color:w||"white"}]},Q=e=>{if(h||d)return;const n=(e-X.current)/1e3;X.current=e,g.current.forEach(t=>{const I=t.x+t.velocityX*t.speed,m=t.y+t.velocityY*t.speed;m+t.radius>f||m-t.radius<0?(t.velocityY=-t.velocityY,t.y=m+t.radius>f?f-t.radius:t.radius):t.y=m,V(t,y)?J(t,y):V(t,l)?J(t,l):t.x=I,(t.x<0||t.x>i)&&(x(t.x<0?2:1),re())}),T&&L(t=>Math.max(t-P*n,0)),F&&L(t=>Math.min(t+P*n,f-y.height)),_&&D(t=>Math.max(t-P*n,0)),C&&D(t=>Math.min(t+P*n,f-l.height)),ie(),M.current=requestAnimationFrame(Q)};return M.current=requestAnimationFrame(Q),()=>cancelAnimationFrame(M.current)},[h,d,y,l,x,T,F,_,C]),s.useEffect(()=>{const c=i=>{(i.key==="w"||i.key==="W")&&W(!0),(i.key==="s"||i.key==="S")&&H(!0),i.key==="ArrowUp"&&q(!0),i.key==="ArrowDown"&&K(!0)},r=i=>{(i.key==="w"||i.key==="W")&&W(!1),(i.key==="s"||i.key==="S")&&H(!1),i.key==="ArrowUp"&&q(!1),i.key==="ArrowDown"&&K(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",r)}},[y,l]),s.useEffect(()=>{ee(c=>({...c,y:E})),te(c=>({...c,y:Y}))},[E,Y,Z]),o.jsxs("div",{ref:O,className:"relative flex flex-col items-center lp:gap-7 gap-3 max-lg:w-full",children:[o.jsxs("div",{className:`relative aspect-video bg-cover bg-center border rounded-2xl
					${h?"brightness-[20%]":"brightness-[1]"}`,style:{width:"clamp(18.125rem, 40.265vw + 10.575rem, 75rem)",maxWidth:`${b}px`},children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center brightness-50 rounded-2xl",style:{backgroundImage:`url('/assets/images/tables/table${v}.${v>6?"gif":"webp"}')`}}),o.jsx("canvas",{ref:S,width:$.width,height:$.height,className:"absolute top-0 left-0 rounded-2xl",style:{width:"100%",height:"100%"}})]}),h&&o.jsx("div",{children:o.jsx("p",{className:`text-[100px] font-dreamscape text-center leading-[1.01] game-paused
							absolute transform top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,children:"GAME PAUSED"})}),!d&&o.jsxs("button",{onClick:A,className:"pause flex items-center gap-3 brightness-[1] select-none",children:[o.jsx("img",{src:`/assets/images/icons/${h?"play":"pause"}.svg`,alt:""}),o.jsx("p",{className:"align-middle",children:h?"resume":"pause"})]})]})});export{ge as P,me as a};
